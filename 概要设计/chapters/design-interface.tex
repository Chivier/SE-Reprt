\chapter{接口设计}
\section{用户接口}
客户端程序是安卓图形交互程序，提供图形化的用户界面

\section{内部接口}
\subsection{下载模块\ 与\ 请求发送/接收模块}
下载模块将下载请求发送给请求发送/接收模块，以进一步处理。请求发送/接收模块在接受到云端送来的数据包后进一步组装成可以被上层模块直接处理的数据。

这两个模块间的通讯是通过操作系统的底层的调用实现的，即两者相互调用并通过操作系统传递消息。

\subsection{下载模块\ 与\ 本地数据库维护模块}
下载模块会将下载的数据保存到本地。这时候本地数据库维护模块会将这个信息保存在本地数据库中。

这两个模块间的通讯是通过操作系统的底层的调用实现的。

\subsection{音频播放模块\ 与\ 本地数据库维护模块}
音频播放模块在要播放本地音乐信息的时候会通过查询本地数据库维护模块，来得到本地保存了哪些音乐文件，以及这些音乐文件的位置。每次通讯的过程是音频播放模块向本地数据库维护模块提出查询请求，本地数据库维护模块处理请求后将结果返回给音频播放模块。

这两个模块间的通讯是通过操作系统的底层的调用实现的。

\subsection{界面显示模块\ 与\ 本地数据库维护模块}
界面显示模块在要显示相关信息的时候会通过查询本地数据库维护模块，来得到本地保存了哪些信息（如用户头像等），以及这些信息文件保存的位置。每次通讯的过程是界面显示模块向本地数据库维护模块提出查询请求，本地数据库维护模块处理请求后将结果返回给界面显示模块。

这两个模块间的通讯是通过操作系统的底层的调用实现的。

\subsection{音频播放模块\ 与\ 请求发送/接收模块}
当要播放网络中的歌曲时，音频播放模块首先向请求发送/接收模块发送播放网络流媒体的请求。当服务器发送的流媒体数据到达本机之后，先通过请求发送/接收模块将数据封装为可以被上层软件直接使用的数据，然后再将这个数据发送给音频播放模块。

这两个模块间的通讯是通过操作系统的底层的调用实现的。

\subsection{请求发送/接收模块\ 与\ 云端请求/回应处理模块}
请求发送/接收模块和云端请求。回应处理模块是手机客户端与云端服务器之间进行通讯的唯一方式。请求发送/接收模块处理客户端中所用访问云端数据的请求，将这些请求封装为数据包，以IP报文的格式发送出去。而云端请求/回应处理模块会在接收到这些IP报文后将这些报文解析为上层可用的数据以进一步使用。在云端数据准备好后，云端请求/回应处理模块将这些云端的数据封装为数据包，以IP报文的格式发送给客户端。而客户端在接收到这些数据后，将这些数据解析为客户端上层软件可以直接使用的数据，在发送给相应的上层模块。

这两个模块中的通讯通过网络实现，将借助TCP/IP协议进行通讯。

\subsection{后台数据库维护模块\ 与\ 云端请求/回应处理模块}
当云端接收到访问后台数据库的请求时，它会在将这个请求解析出来后，将请求转发给后台数据库维护模块。后台数据库接收到云端请求/回应处理模块后将数据从后台数据库中查询出来。待数据处理准备好之后，数据被发送给云端请求/回应模块。

这两个模块之间的通讯通过云端服务器中的操作系统的调用和信息传递机制完成。

\subsection{后台数据库维护模块\ 与\ 相似推荐模块}
相似推荐模块要计算和查找相似的推荐时，会向后台数据维护模块发出访问一些后台数据库中数据的请求。后代数据库维护模块接收到这些请求后会将数据准备好，然后发送给相似推荐模块进行进一步的计算和分析。

这两个模块之间的通讯通过云端服务器中的操作系统的调用和信息传递机制完成。

\subsection{云端请求/回应处理模块\ 与\ 相似推荐模块}
到达云端的请求还有可能是对相似推荐的请求。这时候，云端请求/回应模块将这个请求发送给相似推荐模块。相似推荐模块会进行计算后得到一些相似的歌曲信息。这些信息会由相似推荐模块发送给云端请求/回应处理模块。

这两个模块之间的通讯通过云端服务器中的操作系统的调用和信息传递机制完成。

